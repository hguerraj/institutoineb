import{enableSelectModal}from"./core-functions.js";const enableCreateUpdate=function(){$('select[name^="cu_field_type_"]').on("change",(function(){const e=$(this).val(),a=$(this).closest(".form-group").parent('div[class^="col-"]'),t=a.find('select[name^="cu_field_width_"]');let i;"textarea"!=e?a.find(".tinymce").prop("checked",!1).attr("disabled",!0).closest("label").addClass("disabled"):a.find(".tinymce").removeAttr("disabled").closest("label").removeClass("disabled"),"image"==e?$(this).closest(".form-group").find(".cu_special_image_wrapper").show():$(this).closest(".form-group").find(".cu_special_image_wrapper").hide(),"date"==e||"datetime"==e||"time"==e||"month"==e?("date"==e||"datetime"==e||"month"==e?("date"==e||"datetime"==e?i="dddd mmmm yyyy":"month"==e&&(i="mmmm"),a.find(".cu_special_date_wrapper").find('label[for^="cu_special_date_"]').show(),a.find(".cu_special_date_wrapper").find('input[name^="cu_special_date_"]').attr("placeholder",i).parent('div[class^="col-"]').show()):(a.find(".cu_special_date_wrapper").find('label[for^="cu_special_date_"]').hide(),a.find(".cu_special_date_wrapper").find('input[name^="cu_special_date_"]').parent('div[class^="col-"]').hide()),"datetime"==e||"time"==e?(a.find(".cu_special_date_wrapper").find('label[for^="cu_special_time_"]').show(),a.find(".cu_special_date_wrapper").find('input[name^="cu_special_time_"]').attr("placeholder","H:i a").parent('div[class^="col-"]').show()):(a.find(".cu_special_date_wrapper").find('label[for^="cu_special_time_"]').hide(),a.find(".cu_special_date_wrapper").find('input[name^="cu_special_time_"]').parent('div[class^="col-"]').hide()),a.find(".cu_special_date_wrapper").show()):a.find(".cu_special_date_wrapper").hide(),"password"==e?a.find(".cu_special_password_wrapper").show():a.find(".cu_special_password_wrapper").hide(),"input"==e||"textarea"==e?a.find(".char-count").removeAttr("disabled").closest("label").removeClass("disabled"):a.find(".char-count").prop("checked",!1).attr("disabled",!0).closest("label").addClass("disabled"),"datetime"==e?t.find('option[value^="33%"]').attr("disabled",!0):t.find('option[value^="33%"]').removeAttr("disabled")}));const e=$('[id^="validation-custom-ajax-elements-container-"]'),a=function(){$('select[name^="cu_validation_function_"]').on("change",(function(){const e=$(this).attr("data-index"),a=$(this).attr("data-column-name"),t=$("#ajax-update-validation-helper");$.ajax({url:generatorUrl+"inc/update-validation-helper.php",data:{columnName:a,index:e,value:$(this).val()}}).done((function(e){t.html(e);const a=window.go;setTimeout(a,0)})).fail((function(e,a,t){console.log(t)}))}))};a(),enableSelectModal("cu_select_modal");const t=function(e,a,t){let i=parseInt($(a).attr("data-index")),n=parseInt(t.val());const l=function(){const a=e.find('.validation-dynamic[data-index="'+i+'"]'),t=$(a).find('input:not([type="search"]), textarea, select, radio, checkbox');$(t).each((function(e,a){let t=$(a).attr("id"),n="",l="";if($(a).is('input[type="radio"]')){let e=$(a).attr("name").replace("-"+parseInt(i),"-"+parseInt(i+1));n=$('input[name="'+e+'"]:checked'),l=n.val(),$(a).val()==l?$(a).prop("checked",!0):$(a).prop("checked",!1)}else{const e=t.replace("-"+parseInt(i),"-"+parseInt(i+1));n=$("#"+e),$(a).is("select")?(l=n.find("option:selected").val(),window.slimSelects[t].set(l)):(l=n.val(),$(a).val(l))}}))};if(e.find(".validation-dynamic")[i])for(;e.children(".validation-dynamic").eq(i).length>0;)l(),i++;n-=1,t.val(n),e.find(".validation-remove-element-button:last").closest(".validation-dynamic").remove()};$(e).each((function(){const e=$(this),i=$(this).attr("id").replace("validation-custom-ajax-elements-container-","");let n,l=$('input[name="validation-dynamic-fields-index-'+i+'"]');$(this).siblings().find(".validation-add-element-button").on("click",(function(){n=parseInt(l.val()),n++,l.val(n),$.ajax({url:generatorUrl+"inc/validation-custom-dynamic-elements.php",data:{columnName:i,index:n}}).done((function(i){e.append(i);const c=window.run;void 0!==c&&setTimeout(c,0);const d=e.find('div[data-index="'+n+'"] select').attr("id");window.slimSelects[d]=new SlimSelect({select:"#"+d}),a(),e.find(".validation-remove-element-button").removeClass("hidden").off("click").on("click",(function(){t(e,this,l)}))})).fail((function(e,a,t){console.log(t)}))})),$(this).find(".validation-remove-element-button").on("click",(function(){t(e,this,l)}))}))},loadValidationAuto=function(){const e=$('select[name^="cu_field_type_"], select[name^="cu_special_password_"]');e.on("change",(function(e){const a=$(e.target).attr("id").replace("cu_field_type_","").replace("cu_special_password_",""),t=$('div[id="validation-auto-ajax-elements-container-'+a+'"]'),i=$('select[name="cu_field_type_'+a+'"]').val(),n=$('select[name^="cu_special_password_'+a+'"]').val();$.ajax({url:generatorUrl+"inc/validation-auto-ajax-elements.php",async:!0,data:{columnName:a,fieldType:i,passwordValue:n}}).done((function(e){t.html(e)})).fail((function(){console.log("error")}))})),e.each((function(){const e=$(this).attr("name").replace("cu_field_type_","cu_validation_type_");$('input[name="'+e+'"]')[0]&&"auto"==$('input[name="'+e+'"]:checked').val()&&$(this).trigger("change")}))};export{enableCreateUpdate,loadValidationAuto};