"use strict";import{enablePrettyCheckbox,enableSelectModal,enableTooltips,loadPillContent}from"./modules/core-functions.js";window.enablePrettyCheckbox=enablePrettyCheckbox;const enableBsPills=function(){const e=document.querySelectorAll('a[data-bs-toggle="tab"]'),a={configurationForm:{formId:"configuration-form",container:"#ajax-configuration-form-container",url:generatorUrl+"inc/tabs-contents/configuration-form.php"},diffFilesForm:{formId:"diff-files-form",container:"#ajax-diff-files-form-container",url:generatorUrl+"inc/tabs-contents/diff-files-form.php"}},n={organizeNavbar:{container:"#pills-admin-navbar",url:generatorUrl+"inc/tabs-contents/organize-navbar.php"}};e.forEach((e=>{e.addEventListener("show.bs.tab",(function(e){$("#user-msg-container").html(""),"true"==$("#pills-configuration-tab").attr("aria-selected")?$("#pills-crud-nav").removeClass("d-none").addClass("d-flex"):$("#pills-crud-nav").removeClass("d-flex").addClass("d-none");const t=$(e.target).attr("data-bs-target");"#pills-configuration"===t?loadPillContent(a.configurationForm):"#pills-admin-navbar"===t?loadPillContent(n.organizeNavbar):"#pills-compare-merge"===t&&loadPillContent(a.diffFilesForm)}))}))};loadjs([adminUrl+"assets/javascripts/bootstrap/dist/bootstrap-bundle.min.js"],"core",{async:!1});import{enableReadPaginated}from"./modules/read-paginated.js";loadjs.ready("core",(()=>{loadjs([classUrl+"phpformbuilder/plugins/material-pickers-base/dist/css/material-pickers-base.min.css",classUrl+"phpformbuilder/plugins/material-pickers-base/dist/js/material-pickers-base.min.js"],"modal-js"),loadjs.ready("modal-js",(()=>{$(".modal").modal().removeClass("d-none"),window.ajaxModal=M.Modal.getInstance($("#ajax-modal"))})),enableBsPills(),enableTooltips(),$('*[data-toggle-loader="true"]').on("click",(()=>{$("#loader").removeClass("d-none"),$("body").addClass("pace-running").removeClass("pace-done")}));let e=$('input[name="action"]'),a=e.val();if(void 0!==a&&""!==a||(a="build_read",e.val(a)),$('#form-select-table select[name="table"]').on("change",(function(){$('input[name="table-to-reset"]').val($(this).val()),$('button[name="btn-reset-table"]').find("em").text($(this).val())})),$('input[name="list_type"]').on("click",(function(){if(!0===$('input[value="build_paginated_list"]').prop("checked"))$('div[data-show-values="build_paginated_list"]').removeClass("off").addClass("on"),$('div[data-show-values="build_single_element_list"]').removeClass("on").addClass("off");else if(!0===$('input[value="build_single_element_list"]').prop("checked")&&($('div[data-show-values="build_paginated_list"]').removeClass("on").addClass("off"),$('div[data-show-values="build_single_element_list"]').removeClass("off").addClass("on"),!$("body").hasClass("form-read-single-loaded"))){const e=$('.hidden-wrapper[data-show-values="build_single_element_list"]');$.ajax({url:generatorUrl+"inc/tabs-contents/form-read-single.php"}).done((function(a){e.html(a),$("body").addClass("form-read-single-loaded"),enableTooltips(),enableSelectModal("rs_jedit_select_modal");const n=window.run;void 0!==n&&setTimeout(n,0)})).fail((function(e,a,n){console.log(n)}))}})),$("#reload-db-structure-link").on("click",(function(){$.ajax({url:generatorUrl+"inc/reload-db-structure.php",type:"GET"}).done((function(){location.reload()}))})),$('button[name="form-select-fields-submit-btn"]').on("click",(function(e){e.preventDefault();const a=$("#form-select-fields");$.when(a.find(".hidden-wrapper.off").remove()).then((function(){a.submit()}))})),enableReadPaginated(),$("#debug")[0]){const e=$("#debug");$("#btn-debug").on("click",(function(){e.toggleClass("on")}))}if($("#lock-admin-link")[0]&&$("#lock-admin-link").on("click",(function(e){return e.preventDefault(),$("form#lock-unlock-admin").submit(),!1})),$(".choose-action-radio").on("click",(function(){a=$(this).attr("id"),e.val(a);const n=document.querySelector('input[name="action"]'),t=new Event("change");if(n.dispatchEvent(t),$(".choose-action-radio").removeClass("text-bg-primary-500 active").addClass("text-bg-secondary-700"),$("#"+a).removeClass("text-bg-secondary-700").addClass("text-bg-primary-500 active"),"build_create_edit"==a&&!$("body").hasClass("form-create-edit-loaded")){const e=$('.hidden-wrapper[data-show-values="build_create_edit"]');$.ajax({url:generatorUrl+"inc/tabs-contents/form-create-edit.php"}).done((function(a){e.html(a),import("./modules/create-update.js").then((e=>{$("body").addClass("form-create-edit-loaded"),e.enableCreateUpdate(),e.loadValidationAuto(),enableTooltips();const a=window.run;void 0!==a&&setTimeout(a,0)}))})).fail((function(e,a,n){console.log(n)}))}return!1})),$("#"+a).trigger("click"),"build_read"===a&&$('input[name="list_type"]:checked').trigger("click"),$('button[name="btn-reset-table"]')[0]&&$('button[name="btn-reset-table"]').on("click",(function(e){return $.ajax({url:generatorUrl+"inc/reset-table-form.php",type:"POST",data:{table:$('input[name="table-to-reset"]').val()}}).done((function(e){$("#ajax-modal .modal-content").html(e),window.enablePrettyCheckbox("#ajax-modal"),window.ajaxModal.open(),$('input[name="reset-data-choices"]').on("click",(function(){$('input[name="reset-data"]').val($('input[name="reset-data-choices"]:checked').val())})),$('button[name="reset-table-choices-cancel-btn"]').on("click",(()=>{window.ajaxModal.close()})),$('button[name="reset-table-choices-submit-btn"]').on("click",(()=>{$("#form_reset_table").submit()}))})).fail((function(e,a,n){console.log(n)})),!1})),$('button[name="btn-reinstall"]')[0]&&$('button[name="btn-reinstall"]').on("click",(function(e){return $.ajax({url:generatorUrl+"inc/reinstall-form.php"}).done((function(e){$("#ajax-modal .modal-content").html(e),window.enablePrettyCheckbox("#ajax-modal"),window.ajaxModal.open(),$('button[name="reinstall-phpcg-cancel-btn"]').on("click",(()=>{window.ajaxModal.close()})),$('button[name="reinstall-phpcg-submit-btn"]').on("click",(()=>{$("#form-reinstall-phpcg").submit()}))})).fail((function(e,a,n){console.log(n)})),!1})),$("#install-authentication-module-btn")[0]){const e={formId:"form-admin-setup",container:"#authentication-module-installer",url:$("#install-authentication-module-btn").attr("data-admin-url")+"secure/install/index.php"};$("#install-authentication-module-btn").on("click",(function(a){loadPillContent(e)}))}$("#remove-authentication-module")[0]&&$("#remove-authentication-module").on("click",(function(e){e.preventDefault(),$.ajax({url:generatorUrl+"inc/remove-authentication-module.php",type:"GET"}).done((function(e){$("#ajax-modal .modal-content").html(e),window.enablePrettyCheckbox("#ajax-modal"),window.ajaxModal.open(),$('button[name="remove-authentication-module-cancel-btn"]').on("click",(()=>{window.ajaxModal.close()}))})).fail((function(e,a,n){console.log(n)}))})),document.querySelector("p.invalid-feedback:not(.fv-plugins-message-container)")&&setTimeout((()=>{let e=document.querySelector("p.invalid-feedback:not(.fv-plugins-message-container)").getBoundingClientRect();window.scrollTo(window.scrollX,e.top-200+window.scrollY)}),1e3),$(".card-header .btn-close").on("click",(function(){$(this).closest(".card").remove()}))}));